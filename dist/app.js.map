{"version":3,"sources":["../src/app.js"],"names":["app","router","prefix","use","routes","allowedMethods","name","level","requestIdContext","requestLogger","routePrefix","swaggerOptions","url","listen"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA,IAAMA,MAAM,mBAAZ;AACA,IAAMC,SAAS,wBAAW;AACxBC,UAAQ;AADgB,CAAX,CAAf;;AAIAD,OAAOE,GAAP,CAAW,eAAQC,MAAR,EAAX,EAA6B,eAAQC,cAAR,EAA7B;AACAJ,OAAOE,GAAP,CAAW,kBAAWC,MAAX,EAAX,EAAgC,kBAAWC,cAAX,EAAhC;;AAEAL,IACGG,GADH,CACO,+BAAO;AACVG,QAAM,aADI;AAEVC,SAAO;AAFG,CAAP,CADP,EAKGJ,GALH,CAKO,0BAAOK,gBAAP,EALP,EAMGL,GANH,CAMO,0BAAOM,aAAP,EANP,EAOGN,GAPH,CAOOF,OAAOG,MAAP,EAPP,EAQGD,GARH,CAQO,6BAAU;AACbO,eAAa,aADA,EACe;AAC5BC,kBAAgB;AACdC,SAAK,+BADS,CACwB;AADxB;AAFH,CAAV,CARP,EAcGT,GAdH,CAcOF,OAAOI,cAAP,EAdP;;AAgBA,cAAK,YAAM;AACTL,MAAIa,MAAJ,CAAW,IAAX;AACD,CAFD","file":"app.js","sourcesContent":["import Koa from 'koa';\nimport Router from 'koa-router';\nimport logger from 'koa-bunyan-logger';\nimport swaggerUI from 'koa2-swagger-ui';\n\nimport BookApi from './api/book.api';\nimport SwaggerApi from './api/swagger.api';\nimport { init } from './db';\n\nconst app = new Koa();\nconst router = new Router({\n  prefix: '/api/v1',\n});\n\nrouter.use(BookApi.routes(), BookApi.allowedMethods());\nrouter.use(SwaggerApi.routes(), SwaggerApi.allowedMethods());\n\napp\n  .use(logger({\n    name: 'book-spider',\n    level: 'debug',\n  }))\n  .use(logger.requestIdContext())\n  .use(logger.requestLogger())\n  .use(router.routes())\n  .use(swaggerUI({\n    routePrefix: '/swagger-ui', // host at /swagger instead of default /docs\n    swaggerOptions: {\n      url: '/api/v1/swagger/api-docs.json', // example path to json\n    },\n  }))\n  .use(router.allowedMethods());\n\ninit(() => {\n  app.listen(3000);\n});\n"]}