{"version":3,"sources":["../src/app.js"],"names":["app","router","prefix","use","routes","allowedMethods","name","level","requestIdContext","requestLogger","routePrefix","swaggerOptions","url","listen"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA,IAAMA,MAAM,mBAAZ;AACA,IAAMC,SAAS,wBAAW;AACxBC,UAAQ;AADgB,CAAX,CAAf;;AAIAD,OAAOE,GAAP,CAAW,eAAQC,MAAR,EAAX,EAA6B,eAAQC,cAAR,EAA7B;AACAJ,OAAOE,GAAP,CAAW,kBAAWC,MAAX,EAAX,EAAgC,kBAAWC,cAAX,EAAhC;;AAEAL,IACGG,GADH,CACO,yBAAM,UAAN,CADP,EAEGA,GAFH,CAEO,+BAAO;AACVG,QAAM,aADI;AAEVC,SAAO;AAFG,CAAP,CAFP,EAMGJ,GANH,CAMO,0BAAOK,gBAAP,EANP,EAOGL,GAPH,CAOO,0BAAOM,aAAP,EAPP,EAQGN,GARH,CAQOF,OAAOG,MAAP,EARP,EASGD,GATH,CASOF,OAAOI,cAAP,EATP,EAUGF,GAVH,CAUO,6BAAU;AACbO,eAAa,aADA,EACe;AAC5BC,kBAAgB;AACdC,SAAK,+BADS,CACwB;AADxB;AAFH,CAAV,CAVP;;AAiBA,cAAK,YAAM;AACTZ,MAAIa,MAAJ,CAAW,IAAX;AACD,CAFD","file":"app.js","sourcesContent":["import Koa from 'koa';\nimport Router from 'koa-router';\nimport serve from 'koa-static';\nimport logger from 'koa-bunyan-logger';\nimport swaggerUI from 'koa2-swagger-ui';\nimport path from 'path';\n\nimport BookApi from './api/book.api';\nimport SwaggerApi from './api/swagger.api';\nimport { init } from './db';\n\nconst app = new Koa();\nconst router = new Router({\n  prefix: '/api/v1',\n});\n\nrouter.use(BookApi.routes(), BookApi.allowedMethods());\nrouter.use(SwaggerApi.routes(), SwaggerApi.allowedMethods());\n\napp\n  .use(serve('./static'))\n  .use(logger({\n    name: 'book-spider',\n    level: 'debug',\n  }))\n  .use(logger.requestIdContext())\n  .use(logger.requestLogger())\n  .use(router.routes())\n  .use(router.allowedMethods())\n  .use(swaggerUI({\n    routePrefix: '/swagger-ui', // host at /swagger instead of default /docs\n    swaggerOptions: {\n      url: '/api/v1/swagger/api-docs.json', // example path to json\n    },\n  }));\n\ninit(() => {\n  app.listen(3000);\n});\n"]}