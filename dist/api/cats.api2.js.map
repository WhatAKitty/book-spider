{"version":3,"sources":["../../src/api/cats.api2.js"],"names":["BookApi","prefix","get","ctx","next","ranks","data","err","status","body","msg","rankBooks","rankId","params","catId"],"mappings":";AACA,uC;AACA,4C;AACA,wC;;AAEA,IAAMA,UAAU,wBAAW;AACzBC,UAAQ,cADiB,EAAX,CAAhB;;;AAIAD,QAAQE,GAAR,CAAY,GAAZ,mGAAiB,iBAAOC,GAAP,EAAYC,IAAZ;AACa,gCAAcC,KAAd,EADb,+BACPC,IADO,SACPA,IADO,CACDC,GADC,SACDA,GADC;;AAGXA,eAHW;AAIbJ,gBAAIK,MAAJ,GAAa,GAAb;AACAL,gBAAIM,IAAJ,GAAW;AACTC,mBAAKH,GADI,EAAX,CALa;;;;;AAWfJ,gBAAIK,MAAJ,GAAa,GAAb;AACAL,gBAAIM,IAAJ,GAAWH,IAAX,CAZe,oEAAjB;;;AAeAN,QAAQE,GAAR,CAAY,SAAZ,oGAAuB,kBAAOC,GAAP,EAAYC,IAAZ;AACO,gCAAcO,SAAd,CAAwB;AAClDC,wBAAQT,IAAIU,MAAJ,CAAWC,KAD+B,EAAxB,CADP,gCACbR,IADa,SACbA,IADa,CACPC,GADO,SACPA,GADO;;;AAKjBA,eALiB;AAMnBJ,gBAAIK,MAAJ,GAAa,GAAb;AACAL,gBAAIM,IAAJ,GAAW;AACTC,mBAAKH,GADI,EAAX,CAPmB;;;;;AAarBJ,gBAAIK,MAAJ,GAAa,GAAb;AACAL,gBAAIM,IAAJ,GAAWH,IAAX,CAdqB,sEAAvB","file":"cats.api2.js","sourcesContent":["\nimport Router from 'koa-router';\nimport ZhuishuClient from '../zhuishu.client';\nimport parserFactory from '../core/parser';\n\nconst BookApi = new Router({\n  prefix: '/api/v2/cats',\n});\n\nBookApi.get('/', async (ctx, next) => {\n  const { data, err } = await ZhuishuClient.ranks();\n\n  if (err) {\n    ctx.status = 400;\n    ctx.body = {\n      msg: err,\n    };\n    return;\n  }\n\n  ctx.status = 200;\n  ctx.body = data;\n});\n\nBookApi.get('/:catId', async (ctx, next) => {\n  const { data, err } = await ZhuishuClient.rankBooks({\n    rankId: ctx.params.catId,\n  });\n\n  if (err) {\n    ctx.status = 400;\n    ctx.body = {\n      msg: err,\n    };\n    return;\n  }\n\n  ctx.status = 200;\n  ctx.body = data;\n});\n"]}