{"version":3,"sources":["../../src/api/rank.api2.js"],"names":["RankApi","prefix","get","ctx","next","ranks","data","err","status","body","msg","rankBooks","rankId","params"],"mappings":";AACA,uC;AACA,4C;AACA,wC;;AAEA,IAAMA,UAAU,wBAAW;AACzBC,UAAQ,eADiB,EAAX,CAAhB;;;AAIA;;;;;;;;AAQAD,QAAQE,GAAR,CAAY,GAAZ,mGAAiB,iBAAOC,GAAP,EAAYC,IAAZ;AACa,gCAAcC,KAAd,EADb,+BACPC,IADO,SACPA,IADO,CACDC,GADC,SACDA,GADC;;AAGXA,eAHW;AAIbJ,gBAAIK,MAAJ,GAAa,GAAb;AACAL,gBAAIM,IAAJ,GAAW;AACTC,mBAAKH,GADI,EAAX,CALa;;;;;AAWfJ,gBAAIK,MAAJ,GAAa,GAAb;AACAL,gBAAIM,IAAJ,GAAWH,IAAX,CAZe,oEAAjB;;;AAeA;;;;;;;;AAQAN,QAAQE,GAAR,CAAY,UAAZ,oGAAwB,kBAAOC,GAAP,EAAYC,IAAZ;AACM,gCAAcO,SAAd,CAAwB;AAClDC,wBAAQT,IAAIU,MAAJ,CAAWD,MAD+B,EAAxB,CADN,gCACdN,IADc,SACdA,IADc,CACRC,GADQ,SACRA,GADQ;;;AAKlBA,eALkB;AAMpBJ,gBAAIK,MAAJ,GAAa,GAAb;AACAL,gBAAIM,IAAJ,GAAW;AACTC,mBAAKH,GADI,EAAX,CAPoB;;;;;AAatBJ,gBAAIK,MAAJ,GAAa,GAAb;AACAL,gBAAIM,IAAJ,GAAWH,IAAX,CAdsB,sEAAxB,0E;;;AAiBeN,O","file":"rank.api2.js","sourcesContent":["\nimport Router from 'koa-router';\nimport ZhuishuClient from '../zhuishu.client';\nimport parserFactory from '../core/parser';\n\nconst RankApi = new Router({\n  prefix: '/api/v2/ranks',\n});\n\n/**\n * @swagger\n * /api/v2/ranks:\n *   get:\n *     description: 排行榜\n *     produces:\n *       - application/json\n */\nRankApi.get('/', async (ctx, next) => {\n  const { data, err } = await ZhuishuClient.ranks();\n\n  if (err) {\n    ctx.status = 400;\n    ctx.body = {\n      msg: err,\n    };\n    return;\n  }\n\n  ctx.status = 200;\n  ctx.body = data;\n});\n\n/**\n * @swagger\n * /api/v2/ranks/{rankId}:\n *   get:\n *     description: 某个排行榜的书本列表\n *     produces:\n *       - application/json\n */\nRankApi.get('/:rankId', async (ctx, next) => {\n  const { data, err } = await ZhuishuClient.rankBooks({\n    rankId: ctx.params.rankId,\n  });\n\n  if (err) {\n    ctx.status = 400;\n    ctx.body = {\n      msg: err,\n    };\n    return;\n  }\n\n  ctx.status = 200;\n  ctx.body = data;\n});\n\nexport default RankApi;\n"]}