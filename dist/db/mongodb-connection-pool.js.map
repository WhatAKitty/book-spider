{"version":3,"sources":["../../src/db/mongodb-connection-pool.js"],"names":["MongoClient","db","init","callback","console","log","connect","err","database"],"mappings":"oGAAA,kC;;AAEA,IAAMA,cAAc,kBAAQA,WAA5B;;AAEA,IAAIC,WAAJ;;AAEO,IAAMC,sBAAO,SAAPA,IAAO,CAACC,QAAD,EAAc;AAChCC,UAAQC,GAAR,CAAY,eAAZ;AACA;AACAL,cAAYM,OAAZ,CAAoB,uCAApB,EAA6D,UAACC,GAAD,EAAMC,QAAN,EAAmB;AAC9EJ,YAAQC,GAAR,CAAY,aAAZ;AACA,QAAIE,GAAJ,EAAS,MAAMA,GAAN;;AAETN,SAAKO,QAAL;AACJJ,YAAQC,GAAR,CAAY,aAAZ,EAA2BJ,EAA3B;AACIE;AACD,GAPD;AAQD,CAXM,C;;AAaQ,YAAM;AACnB,MAAI,CAACF,EAAL,EAAS,MAAM,YAAN;AACT,SAAOA,EAAP;AACD,C","file":"mongodb-connection-pool.js","sourcesContent":["import MongoDB from 'mongodb';\n\nconst MongoClient = MongoDB.MongoClient;\n\nlet db;\n\nexport const init = (callback) => {\n  console.log('start init db');\n  // Initialize connection once\n  MongoClient.connect(\"mongodb://localhost:27017/book-spider\", (err, database) => {\n    console.log('finish init')\n    if (err) throw err;\n\n    db = database;\nconsole.log('db inited: ', db);\n    callback();\n  });\n}\n\nexport default () => {\n  if (!db) throw '请先初始化数据库连接';\n  return db;\n};\n"]}